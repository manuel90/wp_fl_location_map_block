{"version":3,"file":"view.js","mappings":"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","sources":["webpack://futurelab-location-map/external window \"jQuery\"","webpack://futurelab-location-map/webpack/bootstrap","webpack://futurelab-location-map/webpack/runtime/compat get default export","webpack://futurelab-location-map/webpack/runtime/define property getters","webpack://futurelab-location-map/webpack/runtime/hasOwnProperty shorthand","webpack://futurelab-location-map/webpack/runtime/make namespace object","webpack://futurelab-location-map/./src/view.js"],"sourcesContent":["module.exports = window[\"jQuery\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nimport jQuery from 'jquery';\n\nconst GOOGLE_API_KEY = 'AIzaSyD7HJ4msrNzvvoxQlAdWqRpk_WoirvrMYI';\n\n(g=>{var h,a,k,p=\"The Google Maps JavaScript API\",c=\"google\",l=\"importLibrary\",q=\"__ib__\",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement(\"script\"));e.set(\"libraries\",[...r]+\"\");for(k in g)e.set(k.replace(/[A-Z]/g,t=>\"_\"+t[0].toLowerCase()),g[k]);e.set(\"callback\",c+\".maps.\"+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+\" could not load.\"));a.nonce=m.querySelector(\"script[nonce]\")?.nonce||\"\";m.head.append(a)}));d[l]?console.warn(p+\" only loads once. Ignoring:\",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({\nkey: GOOGLE_API_KEY,\nv: \"weekly\",\n});\n\nasync function init() {\n\t\n\tawait google.maps.importLibrary(\"maps\");\n\t\n\t/*if(google.maps.Map === undefined) {\n\t\tsetTimeout(init, 100);\n\t\treturn;\n\t}*/\n\tconst mapSettings = new Map();\n\t\n\tconst onCreate = (idx, el) => {\n\t\tconst $el = jQuery(el);\n\t\t\n\t\tconst renderMap = async (itemMap) => {\n\t\t\tconst location = { lat: parseFloat(itemMap.latitude), lng: parseFloat(itemMap.longitude) };\n\t\t\tconst map = new google.maps.Map($el.find('.wrap-futurelab-location-map .map-section')[0], {\n\t\t\t\tcenter: location,\n\t\t\t\tzoom: 12,\n\t\t\t\tmapId: `futurelab-map-id-${idx}`,\n\t\t\t});\n\t\t\t\n\t\t\tconst { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\");\n\t\t\tconst customImage = document.createElement('img');\n\t\t\tcustomImage.src = \"https://www.awanuilabs.co.nz/north/auckland/wp-content/themes/healthscope-common/assets/images/map-marker.png\";\n\n\t\t\tnew AdvancedMarkerElement({\n\t\t\t\tmap: map,\n\t\t\t\tposition: location,\n\t\t\t\tcontent: customImage,\n\t\t\t});\n\t\t\t\n\t\t}\n\t\t\n\t\tconst settings = {\n\t\t\twebsite: $el.data('website'),\n\t\t\tslug: $el.data('slug'),\n\t\t};\n\t\tconst keyMap = `${settings.website}-${settings.slug}`;\n\t\t\n\t\tif(mapSettings.has(keyMap)) {\n\t\t\trenderMap(mapSettings.get(keyMap));\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif($el.data('centre')) {\n\t\t\trenderMap($el.data('centre'));\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t/*fetchDataMap(settings).then(data => {\n\t\t\tif(data && data['map_data']) {\n\t\t\t\tconst itemMap = data['map_data'].find((itemMap) => itemMap.slug === settings.slug);\n\t\t\t\tif(itemMap) {\n\t\t\t\t\tmapSettings.set(keyMap, itemMap);\n\t\t\t\t\trenderMap(itemMap);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`No map data found for slug: ${settings.slug}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch(error => {\n\t\t\tconsole.error('Error fetching data:', error);\n\t\t});*/\n\t\t\n\t};\n\t\n\tconst listBlocksInstance = jQuery('.futurelab-location-map');\n\t\n\tlistBlocksInstance.each(onCreate);\n}\nwindow.addEventListener('DOMContentLoaded', init, false);\n\n\n"],"names":["jQuery","GOOGLE_API_KEY","g","h","a","k","p","c","l","q","m","document","b","window","d","maps","r","Set","e","URLSearchParams","u","Promise","f","n","createElement","set","replace","t","toLowerCase","src","onerror","Error","nonce","querySelector","head","append","console","warn","add","then","key","v","init","google","importLibrary","mapSettings","Map","onCreate","idx","el","$el","renderMap","itemMap","location","lat","parseFloat","latitude","lng","longitude","map","find","center","zoom","mapId","AdvancedMarkerElement","customImage","position","content","settings","website","data","slug","keyMap","has","get","listBlocksInstance","each","addEventListener"],"sourceRoot":""}